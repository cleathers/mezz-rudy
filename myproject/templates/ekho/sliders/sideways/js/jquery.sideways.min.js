function LargeImageLoad(a){$preloader.fadeOut("fast");a.removeAttr("width").removeAttr("height").css({width:"",height:""});$bg.data("originalImageWidth",a.width()).data("originalImageHeight",a.height());if($bg.data("newTitle")){a.attr("title",$bg.data("newTitle"))}FullScreenBackground(a);$bg.data("nextImage",jQuery($outer_container.data("selectedThumb")).next().attr("href"));if(typeof itemIndex!="undefined"){if(itemIndex==lastItemIndex){$bg.data("lastImageReached","Y");$bg.data("nextImage",$outer_container_a.first().attr("href"))}else{$bg.data("lastImageReached","N")}}else{$bg.data("lastImageReached","N")}a.fadeIn("slow");if($bg.data("nextImage")||$bg.data("lastImageReached")=="Y"){SlidePanels("close")}NextImageTip()}function getIndex(a){for(var b=0,c=$outer_container_a.length;b<c;b++){if($outer_container_a[b]===a){return b}}}function NextImageTip(){if($bg.data("nextImage")){$nextimage_tip.stop().css("right",20).fadeIn("fast").fadeOut(2e3,"easeInExpo",function(){$nextimage_tip.css("right",jQuery(window).width())})}}function SlidePanels(a){var b=900;var c="easeInOutExpo";if(a=="open"){jQuery("#arrow_indicator").fadeTo("fast",0);$outer_container.stop().animate({left:0},b,c);$bg.stop().animate({left:585},b,c)}else{$outer_container.stop().animate({left:-710},b,c);$bg.stop().animate({left:0},b,c,function(){jQuery("#arrow_indicator").fadeTo("fast",1)})}}function FullScreenBackground(a){var b=jQuery(window).width();var c=jQuery(window).height();var d=jQuery(a).width();var e=jQuery(a).height();if($toolbar.data("imageViewMode")!="original"){jQuery(a).removeClass("with_border").removeClass("with_shadow");var f=e/d;var g=d/e;if($toolbar.data("imageViewMode")!="fit"){if(c/b<f){jQuery(a).css("width",b).css("height",f*b)}else{jQuery(a).css("height",c).css("width",g*c)}}else{if(c/b>f){jQuery(a).css("width",b).css("height",f*b)}else{jQuery(a).css("height",c).css("width",g*c)}}jQuery(a).css("margin-left",(b-jQuery(a).width())/2).css("margin-top",(c-jQuery(a).height())/2)}else{jQuery(a).addClass("with_border").addClass("with_shadow");jQuery(a).css("width",$bg.data("originalImageWidth")).css("height",$bg.data("originalImageHeight"));jQuery(a).css("margin-left",(b-jQuery(a).outerWidth())/2).css("margin-top",(c-jQuery(a).outerHeight())/2)}}function ImageViewMode(a){$toolbar.data("imageViewMode",a);FullScreenBackground($bgimg);if(a=="full"){$toolbar.html("<span class='lightgrey'>IMAGE VIEW MODE ›</span> FULL")}else if(a=="fit"){$toolbar.html("<span class='lightgrey'>IMAGE VIEW MODE ›</span> FIT")}else{$toolbar.html("<span class='lightgrey'>IMAGE VIEW MODE ›</span> ORIGINAL")}}var $=jQuery.noConflict();$defaultViewMode="full";$bg=jQuery("#bg");$bgimg=jQuery("#bg #bgimg");$preloader=jQuery("#preloader");$outer_container=jQuery("#outer_container");$outer_container_a=jQuery("#outer_container a.thumb_link");$toolbar=jQuery("#toolbar");$nextimage_tip=jQuery("#nextimage_tip");jQuery(window).load(function(){function a(){outerMargin=0;innerMargin=20;$customScrollBox.height(jQuery(window).height()-outerMargin);$dragger_container.height(jQuery(window).height()-innerMargin);visibleHeight=jQuery(window).height()-outerMargin;if($customScrollBox_container.height()>visibleHeight){$dragger_container,$dragger.css("display","block");totalContent=$customScrollBox_content.height();draggerContainerHeight=jQuery(window).height()-innerMargin;animSpeed=400;easeType="easeOutCirc";bottomSpace=1.05;targY=0;draggerHeight=$dragger.height();$dragger.draggable({axis:"y",containment:"parent",drag:function(b,c){a()},stop:function(a,b){c()}});$dragger_container.click(function(b){var c=b.pageY-jQuery(this).offset().top;var d=c+$dragger.height();if(d<draggerContainerHeight){$dragger.css("top",c);a()}else{$dragger.css("top",draggerContainerHeight-$dragger.height());a()}});jQuery(function(){$customScrollBox.bind("mousewheel",function(b,c){vel=Math.abs(c*10);$dragger.css("top",$dragger.position().top-c*vel);a();if($dragger.position().top<0){$dragger.css("top",0);$customScrollBox_container.stop();a()}if($dragger.position().top>draggerContainerHeight-$dragger.height()){$dragger.css("top",draggerContainerHeight-$dragger.height());$customScrollBox_container.stop();a();}return false})});function a(){var a=(totalContent-visibleHeight/bottomSpace)/(draggerContainerHeight-draggerHeight);var b=$dragger.position().top;targY=-b*a;var c=$customScrollBox_container.position().top-targY;$customScrollBox_container.stop().animate({top:"-="+c},animSpeed,easeType)}$dragger.mouseup(function(){c()}).mousedown(function(){b()});function b(){$dragger.css("background","url("+$imgPath+"round_custom_scrollbar_bg_over.png)")}function c(){$dragger.css("background","url("+$imgPath+"round_custom_scrollbar_bg.png)")}}else{$dragger,$dragger_container.css("display","none")}}$toolbar.data("imageViewMode",$defaultViewMode);ImageViewMode($toolbar.data("imageViewMode"));$customScrollBox=jQuery("#customScrollBox");$customScrollBox_container=jQuery("#customScrollBox .container");$customScrollBox_content=jQuery("#customScrollBox .content");$dragger_container=jQuery("#dragger_container");$dragger=jQuery("#dragger");a();jQuery(window).resize(function(){FullScreenBackground("#bgimg");$dragger.css("top",0);$customScrollBox_container.css("top",0);$customScrollBox.unbind("mousewheel");a()});LargeImageLoad($bgimg)});$bgimg.load(function(){LargeImageLoad(jQuery(this))});$outer_container.hover(function(){},function(){SlidePanels("close")});jQuery("#arrow_indicator").click(function(){SlidePanels("open")});$outer_container_a.click(function(a){a.preventDefault();var b=this;$bgimg.css("display","none");$preloader.fadeIn("fast");$outer_container_a.each(function(){jQuery(this).children(".selected").css("display","none")});jQuery(this).children(".selected").css("display","block");$outer_container.data("selectedThumb",b);$bg.data("nextImage",jQuery(this).next().attr("href"));$bg.data("newTitle",jQuery(this).children("img").attr("title"));itemIndex=getIndex(b);lastItemIndex=$outer_container_a.length-1;$bgimg.attr("src","").attr("src",b)});$bgimg.click(function(a){var b=jQuery(this);if($bg.data("nextImage")){b.css("display","none");$preloader.fadeIn("fast");jQuery($outer_container.data("selectedThumb")).children(".selected").css("display","none");if($bg.data("lastImageReached")!="Y"){jQuery($outer_container.data("selectedThumb")).next().children(".selected").css("display","block")}else{$outer_container_a.first().children(".selected").css("display","block")}var c=$outer_container.data("selectedThumb");if($bg.data("lastImageReached")!="Y"){$outer_container.data("selectedThumb",jQuery(c).next())}else{$outer_container.data("selectedThumb",$outer_container_a.first())}$bg.data("newTitle",jQuery($outer_container.data("selectedThumb")).children("img").attr("title"));if($bg.data("lastImageReached")!="Y"){itemIndex++}else{itemIndex=0}b.attr("src","").attr("src",$bg.data("nextImage"))}});$toolbar.click(function(a){if($toolbar.data("imageViewMode")=="full"){ImageViewMode("fit")}else if($toolbar.data("imageViewMode")=="fit"){ImageViewMode("original")}else if($toolbar.data("imageViewMode")=="original"){ImageViewMode("full")}});var images=[$imgPath+"ajax-loader_dark.gif",$imgPath+"round_custom_scrollbar_bg_over.png"];$.each(images,function(a){images[a]=new Image;images[a].src=this})