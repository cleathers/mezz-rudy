(function(a){a.fn.video_background=function(b){function x(a){g=document.getElementById(a.id)}function B(){if(h)return!g.paused;else return g.isPlaying()}function C(){if(h)return!g.volume;else return g.isMute()}var c=true;var d=true;var e=false;var f="16:9";var g;var h=false;var i=false;var j=false;var k=false;var l=false;var m=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(android)|(webOS)/i);var n=a(this);if(b.raster!=undefined){if(b.raster=="true")n.append('<div class="grid_raster"></div>')}if(b.loop!=undefined){if(b.loop=="true")c=true;else if(b.loop=="false")c=false}if(b.autoplay!=undefined){if(b.autoplay=="true")d=true;else if(b.autoplay=="false")d=false}if(b.muted!=undefined){if(b.muted=="true")e=true;else if(b.muted=="false")e=false}var o=m?b.formatMobile:b.format;if(o!=undefined){var p=new RegExp("[0-9][0-9]*:[0-9][0-9]*");if(o.match(p))f=o;else alert("INVALID FORMAT")}var q="";var r="";var s;var t;var u=0;while(f[u]!=":"){q+=f[u];u++}s=parseFloat(q,10);u++;while(u<f.length){r+=f[u];u++}t=parseFloat(r,10);if(!m){if(b.mp4!=undefined)i=true;if(b.webm!=undefined)j=true;if(b.flv!=undefined)k=true;if(b.ogg!=undefined)l=true}else{if(b.mp4Mobile!=undefined)i=true;if(b.webmMobile!=undefined)j=true;if(b.flvMobile!=undefined)k=true;if(b.oggMobile!=undefined)l=true}var v=a("<div id='background-video'></div>");var w=a("<div id='background-video-mask'></div>");w.css("position","fixed");w.css("width","100%");w.css("height","100%");w.css("margin","0");w.css("padding","0");w.css("left","0");w.css("top","0");w.css("overflow","hidden");w.css("z-index","-5");v.css("position","absolute");v.css("margin","0");v.css("padding","0");w.append(v);n.append(w);a(window).resize(function(){var b=a(window).width();var c=a(window).height();var d;var e;d=b;e=d*t/s;if(e<c){e=c;d=s*e/t}v.css("width",d);v.css("height",e);v.css("left",b/2-d/2);v.css("top",c/2-e/2)});a(window).trigger("resize");var y=function(){var a="";var f="";var k="";var n=false;if(Modernizr.video.h264&&i){if(m)a=b.mp4Mobile;else a=b.mp4;f="video/mp4"}else if(Modernizr.video.ogg&&l){if(m)a=b.oggMobile;else a=b.ogg;f="video/ogg"}else if(Modernizr.video.webm&&j){if(m)a=b.webmMobile;else a=b.webm;f="video/webm"}else n=true;if(!n){var o=document.createElement("video");o.setAttribute("id","background-video-id");o.setAttribute("width","100%");o.setAttribute("height","100%");o.setAttribute("src",a);o.setAttribute("type",f);if(m)o.setAttribute("preload","auto");else o.setAttribute("preload","metadata");if(d)o.setAttribute("autoplay","autoplay");if(c)o.setAttribute("loop","loop");document.getElementById("background-video").appendChild(o);g=document.getElementById("background-video-id");g.load();h=true;if(e)background_mute()}};var z=function(){v.append("<h1>You need at least Flash Player 9.0</h1>");var a={url:""};var f=false;if(i){if(m)a.url=b.mp4Mobile;else a.url=b.mp4}else if(k){if(m)a.url=b.flvMobile;else a.url=b.flv}else f=true;if(!f){a.loop=c;a.autoplay=d;a.muted=e;a.formW=s;a.formH=t;swfobject.embedSWF("assets/easy_video_background/video.swf","background-video","100%","100%","9.0",null,a,{allowfullscreen:true,allowScriptAccess:"always",wmode:"transparent"},{name:"background-video-swf"},x)}else y()};var A=swfobject.getFlashPlayerVersion();if(A.major>9){z()}else if(Modernizr.video){y()}background_play=function(){if(h)g.play();else g.resume()};background_pause=function(){g.pause()};background_toggle_play=function(){if(B())background_pause();else background_play()};background_mute=function(){if(h)g.volume=0;else g.mute()};background_unmute=function(){if(h)g.volume=1;else g.unmute()};background_toggle_sound=function(){if(C())background_unmute();else background_mute()};var D=false;background_hide=function(){background_pause();w.stop().fadeTo(700,0);D=true};background_show=function(){background_play();w.stop().fadeTo(700,1);D=false};background_toggle_hide=function(){if(D)background_show();else background_hide()};background_rewind=function(){if(h)g.currentTime=0;else g.rewind()}}})(jQuery)