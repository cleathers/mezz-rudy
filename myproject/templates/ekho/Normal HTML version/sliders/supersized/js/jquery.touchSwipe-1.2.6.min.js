/*
 * touchSwipe - jQuery Plugin
 * http://plugins.jquery.com/project/touchSwipe
 * http://labs.skinkers.com/touchSwipe/
 *
 * Copyright (c) 2010 Matt Bryson (www.skinkers.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * $version: 1.2.6
 * This jQuery plugin will only run on devices running Mobile Webkit based browsers (iOS 2.0+, android 2.2+)
 */
(function(a){a.fn.swipe=function(b){if(!this)return false;var c={fingers:1,threshold:75,timeThreshold:250,swipe:null,swipeLeft:null,swipeRight:null,swipeUp:null,swipeDown:null,swipeStatus:null,click:null,triggerOnTouchEnd:true,allowPageScroll:"auto"};var d="left";var e="right";var f="up";var g="down";var h="none";var i="horizontal";var j="vertical";var k="auto";var l="start";var m="move";var n="end";var o="cancel";var p="ontouchstart"in window,q=p?"touchstart":"mousedown",r=p?"touchmove":"mousemove",s=p?"touchend":"mouseup",t="touchcancel";var u="start";var v;if(b.allowPageScroll==undefined&&(b.swipe!=undefined||b.swipeStatus!=undefined))b.allowPageScroll=h;if(b)a.extend(c,b);return this.each(function(){function C(a){var d=p?a.touches[0]:a;u=l;if(p){y=a.touches.length}distance=0;direction=null;if(y==c.fingers||!p){z.x=A.x=d.pageX;z.y=A.y=d.pageY;if(c.swipeStatus)G(a,u);var e=new Date;v=e.getTime()}else{F(a)}b.addEventListener(r,D,false);b.addEventListener(s,E,false)}function D(a){if(u==n||u==o)return;var b=p?a.touches[0]:a;A.x=b.pageX;A.y=b.pageY;direction=K();if(p){y=a.touches.length}u=m;H(a,direction);if(y==c.fingers||!p){distance=I();if(c.swipeStatus)G(a,u,direction,distance);if(!c.triggerOnTouchEnd){var d=new Date;var e=d.getTime();var f=e-v;if(distance>=c.threshold&&f<=c.timeThreshold){u=n;G(a,u);F(a)}}}else{u=o;G(a,u);F(a)}}function E(a){a.preventDefault();distance=I();direction=K();if(c.triggerOnTouchEnd){u=n;if((y==c.fingers||!p)&&A.x!=0){var d=new Date;var e=d.getTime();var f=e-v;if(distance>=c.threshold&&f<=c.timeThreshold){G(a,u);F(a)}else{u=o;G(a,u);F(a)}}else{u=o;G(a,u);F(a)}}else if(u==m){u=o;G(a,u);F(a)}b.removeEventListener(r,D,false);b.removeEventListener(s,E,false)}function F(a){y=0;z.x=0;z.y=0;A.x=0;A.y=0;B.x=0;B.y=0}function G(a,b){if(c.swipeStatus)c.swipeStatus.call(w,a,b,direction||null,distance||0);if(b==o){if(c.click&&(y==1||!p)&&(isNaN(distance)||distance==0))c.click.call(w,a,a.target)}if(b==n){if(c.swipe){c.swipe.call(w,a,direction,distance)}switch(direction){case d:if(c.swipeLeft)c.swipeLeft.call(w,a,direction,distance);break;case e:if(c.swipeRight)c.swipeRight.call(w,a,direction,distance);break;case f:if(c.swipeUp)c.swipeUp.call(w,a,direction,distance);break;case g:if(c.swipeDown)c.swipeDown.call(w,a,direction,distance);break}}}function H(a,b){if(c.allowPageScroll==h){a.preventDefault()}else{var l=c.allowPageScroll==k;switch(b){case d:if(c.swipeLeft&&l||!l&&c.allowPageScroll!=i)a.preventDefault();break;case e:if(c.swipeRight&&l||!l&&c.allowPageScroll!=i)a.preventDefault();break;case f:if(c.swipeUp&&l||!l&&c.allowPageScroll!=j)a.preventDefault();break;case g:if(c.swipeDown&&l||!l&&c.allowPageScroll!=j)a.preventDefault();break}}}function I(){return Math.round(Math.sqrt(Math.pow(A.x-z.x,2)+Math.pow(A.y-z.y,2)))}function J(){var a=z.x-A.x;var b=A.y-z.y;var c=Math.atan2(b,a);var d=Math.round(c*180/Math.PI);if(d<0)d=360-Math.abs(d);return d}function K(){var a=J();if(a<=45&&a>=0)return d;else if(a<=360&&a>=315)return d;else if(a>=135&&a<=225)return e;else if(a>45&&a<135)return g;else return f}var b=this;var w=a(this);var x=null;var y=0;var z={x:0,y:0};var A={x:0,y:0};var B={x:0,y:0};try{this.addEventListener(q,C,false);this.addEventListener(t,F)}catch(L){}})}})(jQuery)